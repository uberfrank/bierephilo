<!DOCTYPE html>
<html lang="en" data-lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="Bierephilo - Your mobile companion">
    <meta name="theme-color" content="#2196F3">

    <!-- PWA Support -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">

    <title>Bierephilo</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1 class="logo">üç∫ Bierephilo</h1>
            <div class="header-actions">
                <div class="global-language-toggle">
                    <button class="global-lang-btn active" data-lang="en">EN</button>
                    <button class="global-lang-btn" data-lang="fr">FR</button>
                </div>
                <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu">
                    <span class="hamburger"></span>
                </button>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav" id="mainNav">
        <ul class="nav-list">
            <li><a href="index.html" class="nav-link active" data-i18n="nav.playGame">Play</a></li>
            <li><a href="questions.html" class="nav-link" data-i18n="nav.questions">Questions</a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <main class="main">
        <!-- Game Section -->
        <section id="game" class="section game-section">
            <div class="container">
                <h2 class="section-title" data-i18n="game.title">Play Bierephilo</h2>
                <p class="section-text" data-i18n="game.subtitle">Draw questions from the philosophical mug and explore deep ideas round by round</p>

                <!-- Game Mode Selection Screen -->
                <div id="gameModeScreen" class="game-screen active">
                    <h3 class="game-subtitle" data-i18n="game.modeTitle">Choose Your Game Mode</h3>
                    <div class="game-mode-buttons">
                        <button class="game-mode-btn" data-mode="random">
                            <div class="game-mode-icon">üé≤</div>
                            <h4 data-i18n="game.randomMode">Fully Random</h4>
                            <p data-i18n="game.randomModeDesc">All questions shuffled randomly</p>
                        </button>
                        <button class="game-mode-btn" data-mode="by-topic">
                            <div class="game-mode-icon">üìñ</div>
                            <h4 data-i18n="game.byTopicMode">By Topic</h4>
                            <p data-i18n="game.byTopicModeDesc">Select a specific topic to focus on</p>
                        </button>
                        <button class="game-mode-btn" data-mode="custom">
                            <div class="game-mode-icon">‚öôÔ∏è</div>
                            <h4 data-i18n="game.customMode">Custom</h4>
                            <p data-i18n="game.customModeDesc">Mix and match tags with custom counts</p>
                        </button>
                    </div>
                </div>

                <!-- Question Count Selection Screen -->
                <div id="questionCountScreen" class="game-screen">
                    <h3 class="game-subtitle" data-i18n="game.questionCountTitle">How Many Questions?</h3>
                    <div class="question-count-options">
                        <button class="count-option-btn" data-count="all">
                            <div class="count-icon">üìö</div>
                            <h4 data-i18n="game.allQuestions">All Questions</h4>
                            <p id="allQuestionsCount" data-i18n="game.allQuestionsDesc">168 questions</p>
                        </button>
                        <button class="count-option-btn" data-count="sample">
                            <div class="count-icon">üéØ</div>
                            <h4 data-i18n="game.sample">Sample</h4>
                            <p data-i18n="game.sampleDesc">Choose a custom amount</p>
                        </button>
                    </div>
                    <div id="sampleSliderContainer" class="slider-container" style="display: none;">
                        <label for="sampleSlider" class="slider-label"><span data-i18n="game.sliderLabel">Number of questions:</span> <span id="sampleValue">20</span></label>
                        <input type="range" id="sampleSlider" class="slider" min="5" max="168" value="20" step="1">
                        <div class="slider-markers">
                            <span>5</span>
                            <span>168</span>
                        </div>
                    </div>
                    <div class="game-nav-buttons">
                        <button class="btn btn-secondary" id="backToMode" data-i18n="game.backButton">Back</button>
                        <button class="btn btn-primary" id="continueToTags" data-i18n="game.continueButton">Continue</button>
                    </div>
                </div>

                <!-- Topic Category Selection Screen (for by-topic mode) -->
                <div id="topicCategoryScreen" class="game-screen">
                    <h3 class="game-subtitle" data-i18n="game.topicCategoryTitle">Choose a Category</h3>
                    <div class="topic-category-buttons">
                        <button class="topic-category-btn" data-category="movement">
                            <div class="topic-category-icon">üèõÔ∏è</div>
                            <h4 data-i18n="topicCategories.movement">Movement</h4>
                        </button>
                        <button class="topic-category-btn" data-category="branch">
                            <div class="topic-category-icon">üå≥</div>
                            <h4 data-i18n="topicCategories.branch">Branch</h4>
                        </button>
                        <button class="topic-category-btn" data-category="difficulty">
                            <div class="topic-category-icon">üìä</div>
                            <h4 data-i18n="topicCategories.difficulty">Difficulty</h4>
                        </button>
                        <button class="topic-category-btn" data-category="theme">
                            <div class="topic-category-icon">üí°</div>
                            <h4 data-i18n="topicCategories.theme">Theme</h4>
                        </button>
                    </div>
                    <div class="game-nav-buttons">
                        <button class="btn btn-secondary" id="backToCountFromCategory" data-i18n="game.backButton">Back</button>
                    </div>
                </div>

                <!-- Topic Selection Screen (for by-topic mode) -->
                <div id="topicSelectionScreen" class="game-screen">
                    <h3 class="game-subtitle" id="topicScreenTitle" data-i18n="game.topicSelectionTitle">Select a Topic</h3>

                    <!-- Topic Options -->
                    <div id="topicOptions" class="topic-options"></div>

                    <div class="game-nav-buttons">
                        <button class="btn btn-secondary" id="backToCategory" data-i18n="game.backButton">Back</button>
                        <button class="btn btn-primary" id="startGameFromTopic" data-i18n="game.startGameButton">Start Game</button>
                    </div>
                </div>

                <!-- Tag Selection Screen (for custom mode) -->
                <div id="tagSelectionScreen" class="game-screen">
                    <h3 class="game-subtitle" id="tagScreenTitle" data-i18n="game.tagSelectionTitle">Select Tags</h3>

                    <!-- Tag Categories -->
                    <div id="tagCategories" class="tag-categories"></div>

                    <!-- Custom Mode: Per-Tag Sliders -->
                    <div id="customTagSliders" class="custom-tag-sliders" style="display: none;"></div>

                    <div class="game-nav-buttons">
                        <button class="btn btn-secondary" id="backToCount" data-i18n="game.backButton">Back</button>
                        <button class="btn btn-primary" id="startGame" data-i18n="game.startGameButton">Start Game</button>
                    </div>
                </div>

                <!-- Gameplay Screen -->
                <div id="gameplayScreen" class="game-screen">
                    <div class="game-header">
                        <div class="game-info">
                            <div class="mug-count">
                                <span class="mug-icon">üç∫</span>
                                <span id="mugCount">0</span> <span data-i18n="game.questionsLeft">questions left</span>
                            </div>
                            <div class="round-info">
                                <span data-i18n="game.round">Round</span> <span id="currentRound">1</span>
                            </div>
                        </div>
                        <button class="btn btn-secondary btn-sm" id="quitGame" data-i18n="game.quitGame">Quit Game</button>
                    </div>

                    <div id="roundQuestions" class="round-questions"></div>

                    <div class="draw-controls">
                        <label for="drawCount" class="draw-label" data-i18n="game.drawLabel">Draw questions:</label>
                        <div class="draw-selector">
                            <button class="draw-btn" data-count="1">1</button>
                            <button class="draw-btn" data-count="2">2</button>
                            <button class="draw-btn" data-count="3">3</button>
                            <button class="draw-btn" data-count="4">4</button>
                            <button class="draw-btn" data-count="5">5</button>
                        </div>
                        <button class="btn btn-primary" id="drawQuestions" data-i18n="game.drawButton">Draw Questions</button>
                    </div>
                </div>

                <!-- Game Complete Screen -->
                <div id="gameCompleteScreen" class="game-screen">
                    <div class="game-complete-content">
                        <div class="complete-icon">üéâ</div>
                        <h3 class="game-subtitle" data-i18n="game.mugEmpty">Mug Empty!</h3>
                        <p class="complete-text" data-i18n="game.gameCompleteText">You've explored all the questions in your philosophical mug.</p>
                        <div class="game-stats">
                            <div class="stat-item">
                                <div class="stat-value" id="totalRounds">0</div>
                                <div class="stat-label" data-i18n="game.roundsPlayed">Rounds Played</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="totalQuestionsPlayed">0</div>
                                <div class="stat-label" data-i18n="game.questionsExplored">Questions Explored</div>
                            </div>
                        </div>
                        <div class="game-nav-buttons">
                            <button class="btn btn-primary" id="playAgain" data-i18n="game.playAgain">Play Again</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p class="footer-text" data-i18n="footer.copyright">&copy; 2026 Bierephilo. All rights reserved.</p>
            <div class="footer-links">
                <a href="#" class="footer-link" data-i18n="footer.privacy">Privacy</a>
                <a href="#" class="footer-link" data-i18n="footer.terms">Terms</a>
            </div>
        </div>
    </footer>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span class="toast-message" id="toastMessage"></span>
    </div>

    <!-- JavaScript Modules (order matters for dependencies) -->
    <script src="ux.js"></script>
    <script src="game-state.js"></script>
    <script src="pregame-questions.js"></script>
    <script src="game-flow-engine.js"></script>
</body>
</html>
